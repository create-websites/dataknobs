<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><title>Interactive Foundations of Causal Inference</title><script src="https://cdn.tailwindcss.com"></script><script src="https://cdn.jsdelivr.net/npm/chart.js"></script><link href="https://fonts.googleapis.com" rel="preconnect"/><link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&amp;family=Lora:ital,wght@0,400;0,600;1,400&amp;display=swap" rel="stylesheet"/><style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        h1, h2, h3, h4 { font-family: 'Lora', serif; }
        .chart-container { position: relative; width: 100%; max-width: 600px; height: 300px; margin-left: auto; margin-right: auto; max-height: 400px; }
        .nav-link { transition: color 0.3s, border-bottom-color 0.3s; border-bottom: 2px solid transparent; }
        .nav-link.active, .nav-link:hover { color: #2563eb; border-bottom-color: #2563eb; }
        .assumption-card { transition: max-height 0.5s ease-in-out, background-color 0.3s; overflow: hidden; }
        .population-unit { transition: all 0.5s ease-in-out; }
        .perspective-container { perspective: 1000px; }
        .flip-card { position: relative; transform-style: preserve-3d; transition: transform 0.8s; }
        .perspective-container:hover .flip-card { transform: rotateY(180deg); }
        .flip-card-front, .flip-card-back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; -webkit-backface-visibility: hidden; }
        .flip-card-back { transform: rotateY(180deg); }
    </style></head><body class="text-slate-800"><header class="bg-white/80 backdrop-blur-lg shadow-sm sticky top-0 z-50"><nav class="container mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-16"><h1 class="text-xl md:text-2xl font-bold text-slate-900">Interactive Causal Inference</h1><div class="hidden md:flex items-center space-x-6"><a class="nav-link font-semibold text-slate-600 pb-1" href="#problem">The Problem</a><a class="nav-link font-semibold text-slate-600 pb-1" href="#randomization">The Solution</a><a class="nav-link font-semibold text-slate-600 pb-1" href="#assumptions">The Rules</a></div></nav></header><main class="container mx-auto px-4 sm:px-6 lg:px-8 py-10"><section class="text-center py-12" id="intro"><h2 class="text-4xl lg:text-5xl font-bold text-slate-900 mb-4">Why is "Why?" a Hard Question?</h2><p class="max-w-3xl mx-auto text-lg text-slate-600">
                This interactive guide visualizes causal inference, moving past mere correlation to explore frameworks for identifying *causal* relationships.
            </p></section><hr class="border-slate-200 my-12"/><section class="scroll-mt-20" id="problem"><div class="text-center mb-10"><h3 class="text-3xl font-bold text-slate-900">The Fundamental Problem of Causal Inference</h3><p class="max-w-2xl mx-auto text-lg text-slate-600 mt-2">The outcome of a different choice, unobserved simultaneously, is the **counterfactual**. See the issue by hovering over the card.</p></div><div class="flex justify-center"><div class="w-full max-w-sm h-64 perspective-container"><div class="w-full h-full flip-card"><div class="flip-card-front flex flex-col items-center justify-center bg-white rounded-xl shadow-lg border border-slate-200 p-6"><span class="text-5xl mb-3">üßë‚Äç‚öïÔ∏è</span><h4 class="text-xl font-bold">Observed Reality</h4><p class="text-center text-slate-600 mt-2">Alex took the new medication. We observe their outcome: <span class="font-bold text-blue-600">Blood Pressure = 120</span>.</p><p class="text-xs text-slate-400 mt-4">Hover to see the counterfactual</p></div><div class="flip-card-back flex flex-col items-center justify-center bg-slate-800 text-white rounded-xl shadow-lg p-6"><span class="text-5xl mb-3">ü§î</span><h4 class="text-xl font-bold">The Counterfactual</h4><p class="text-center text-slate-300 mt-2">Here are a few options, aiming for similar length and meaning:

*   **If Alex skipped the meds, what then?** That remains unseeable.
*   **Without the medicine, what transpired?** This state's unrevealed.
*   **Had Alex refused the pills?** The result's hypothetical.</p><p class="font-bold text-yellow-400 mt-2">Potential Outcome = ?</p></div></div></div></div><p class="text-center mt-8 max-w-2xl mx-auto text-slate-600">Because we can't isolate the individual causal impact, we're forced to estimate the **average effect of treatment (ATE)** for a cohort.</p></section><hr class="border-slate-200 my-12"/><section class="scroll-mt-20" id="randomization"><div class="text-center mb-10"><h3 class="text-3xl font-bold text-slate-900">The Solution: Randomization</h3><p class="max-w-3xl mx-auto text-lg text-slate-600 mt-2">**Random allocation** is the benchmark for impartial conclusions. It yields comparable groups, differing mainly due to the intervention. This lets us use the control group's average result as a sound comparison for the treated group. Let's explore this, highlighting its key challenge: selection bias.</p></div><div class="bg-white rounded-xl shadow-lg border border-slate-200 p-6 lg:p-8"><div class="grid grid-cols-1 lg:grid-cols-2 gap-8"><div class="border-b lg:border-b-0 lg:border-r border-slate-200 pb-8 lg:pr-8 lg:pb-0"><h4 class="text-2xl font-bold text-slate-900">Experiment Simulation</h4><p class="text-slate-600 mt-2 mb-4">Here's a rewrite of similar length:

We assess two population traits: drive (High üß† / Low üò¥) and health status (Good üíö / Fair üíõ). We aim to gauge the impact of a 'Wellness Program'.</p><div class="space-y-3"><button class="w-full bg-slate-700 hover:bg-slate-800 text-white font-bold py-2 px-4 rounded-lg transition" id="populate-btn">1. Generate Population</button><button class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition disabled:bg-slate-300" disabled="" id="assign-btn">2. Randomly Assign to Groups</button><button class="w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-4 rounded-lg transition disabled:bg-slate-300" disabled="" id="bias-btn">Alternate Step 2: Allow Self-Selection (Bias)</button><button class="w-full bg-slate-400 hover:bg-slate-500 text-white font-bold py-2 px-4 rounded-lg transition mt-4" id="reset-btn">Reset Simulation</button></div><div class="mt-6 space-y-4" id="simulation-results"></div></div><div><div class="grid grid-cols-2 gap-4"><div><h4 class="text-xl font-bold text-center mb-2">Treatment Group</h4><div class="h-64 bg-slate-100 rounded-lg p-2 relative flex flex-wrap gap-2 content-start" id="treatment-group-box"></div></div><div><h4 class="text-xl font-bold text-center mb-2">Control Group</h4><div class="h-64 bg-slate-100 rounded-lg p-2 relative flex flex-wrap gap-2 content-start" id="control-group-box"></div></div></div><div class="h-40 mt-4 border-2 border-dashed border-slate-300 rounded-lg p-2 relative flex flex-wrap gap-2 content-start" id="population-box"><div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-slate-400 font-semibold">Population Area</div></div></div></div><div class="mt-8 hidden" id="chart-section"><h4 class="text-2xl font-bold text-slate-900 text-center">Estimated Treatment Effect</h4><div class="chart-container mt-4"><canvas id="ateChart"></canvas></div><p class="text-center mt-4 max-w-2xl mx-auto text-slate-600" id="chart-explanation"></p></div></div></section><hr class="border-slate-200 my-12"/><section class="scroll-mt-20" id="assumptions"><div class="text-center mb-10"><h3 class="text-3xl font-bold text-slate-900">The Rules of the Game: Core Assumptions</h3><p class="max-w-2xl mx-auto text-lg text-slate-600 mt-2">Here are a few options, aiming for a similar size and meaning:

*   Valid causal claims hinge on several key assumptions. Beyond statistical tests, these reflect basic truths about your study's world.
*   Causal inferences require adherence to crucial assumptions. These are not merely statistical, but foundational principles about the system you're analyzing.
*   Validating a causal claim necessitates specific assumptions. These go beyond stats, representing core beliefs about the study's underlying mechanisms.</p></div><div class="space-y-4 max-w-3xl mx-auto"><div class="assumption-card bg-white rounded-lg border border-slate-200 shadow-sm" data-card="sutva"><button class="w-full flex justify-between items-center p-5 text-left font-semibold text-lg">
                        SUTVA: Stable Unit Treatment Value Assumption
                        <span class="text-2xl transform transition-transform card-arrow">+</span></button><div class="px-5 pb-5 max-h-0"><p class="text-slate-600">This is a compound assumption with two key parts:</p><ol class="list-decimal list-inside mt-2 space-y-2 text-slate-600"><li><strong>No Interference:</strong> Here are a few options, all similar in length and meaning:

*   Individual results are independent of others' treatment.
*   Each person's result is unaffected by others' outcomes.
*   Treatment success is independent across individuals.
*   One's response is separate from others' responses. <br/><em>Example Violation:</em> If a vaccine protects my friend, thus lowering my illness risk, their treatment impacted my health outcome.</li><li><strong>Consistency:</strong> All patients receive identical treatment; no undisclosed differences exist. <br/><em>Example Violation:</em> A tutoring program offering inconsistent support, with some students receiving 1 hour and others 10 hours of assistance.</li></ol></div></div><div class="assumption-card bg-white rounded-lg border border-slate-200 shadow-sm" data-card="ignorability"><button class="w-full flex justify-between items-center p-5 text-left font-semibold text-lg">
                        Ignorability (or Exchangeability)
                         <span class="text-2xl transform transition-transform card-arrow">+</span></button><div class="px-5 pb-5 max-h-0"><p class="text-slate-600">This hinges on the critical assumption of no unobserved confounding: treatment assignment is independent of potential outcomes, conditional on observed covariates (X). This holds by construction in randomized controlled trials. In observational studies, it requires measuring and adjusting for all relevant confounders, ensuring treatment and control groups become 'exchangeable' with respect to X.</p></div></div><div class="assumption-card bg-white rounded-lg border border-slate-200 shadow-sm" data-card="positivity"><button class="w-full flex justify-between items-center p-5 text-left font-semibold text-lg">
                        Positivity (or Common Support)
                         <span class="text-2xl transform transition-transform card-arrow">+</span></button><div class="px-5 pb-5 max-h-0"><p class="text-slate-600">Here are a few options, all similar in length:

*   Regardless of attributes, assignment to treatment or control is possible.
*   Every individual, with any traits, can be in either group.
*   Each person, with their specific features, might be treated or controlled.
*   For any profile, there's a treatment or control group option. <br/><em>Example Violation:</em> Due to the program's age restriction (40+), its impact on younger employees (&lt;40) is unmeasurable because a comparable, untreated younger group doesn't exist.</p></div></div></div></section></main><html><head></head><body><footer class="bg-gray-800 text-gray-300"><div class="container mx-auto px-6 py-12 lg:px-8"><div class="grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-4"><div><h5 class="text-lg font-semibold text-white mb-4">Company</h5><ul class="space-y-2"><li><a class="hover:text-white hover:underline transition-colors duration-200" href="https://www.dataknobs.com/about-dataknobs/">About Us</a></li><li><a class="hover:text-white hover:underline transition-colors duration-200" href="https://www.dataknobs.com/products/value-proposition/">Value Proposition</a></li><li><a class="hover:text-white hover:underline transition-colors duration-200" href="https://www.dataknobs.com/blog/">Blog</a></li><li><a class="hover:text-white hover:underline transition-colors duration-200" href="https://www.dataknobs.com/use-cases/">Use Cases Built</a></li><li><a class="hover:text-white hover:underline transition-colors duration-200" href="https://www.dataknobs.com/about-dataknobs/leadership/">Founder</a></li></ul></div><div><h5 class="text-lg font-semibold text-white mb-4">Products</h5><ul class="space-y-2"><li><a class="hover:text-white hover:underline transition-colors duration-200" href="https://www.dataknobs.com/products/kreate/">Kreate</a></li><li><a class="hover:text-white hover:underline transition-colors duration-200" href="https://www.dataknobs.com/products/kontrols/">Kontrols</a></li><li><a class="hover:text-white hover:underline transition-colors duration-200" href="https://www.dataknobs.com/products/knobs/">Knobs</a></li><li><a class="hover:text-white hover:underline transition-colors duration-200" href="https://www.dataknobs.com/use-cases/">Case Studies</a></li></ul></div><div><h5 class="text-lg font-semibold text-white mb-4">Slides Tutorials</h5><ul class="space-y-2"><li><a class="hover:text-white hover:underline transition-colors duration-200" href="https://www.dataknobs.com/generativeai/generative-ai-101-slides.html">GenAI Slides</a></li><li><a class="hover:text-white hover:underline transition-colors duration-200" href="https://www.dataknobs.com/agent-ai/tutorials.html">Agent AI Slides</a></li><li><a class="hover:text-white hover:underline transition-colors duration-200" href="https://www.dataknobs.com/vector-database/">Vector DB Slides</a></li><li><a class="hover:text-white hover:underline transition-colors duration-200" href="https://www.dataknobs.com/generativeai/10-llms/">LLM Slides</a></li><li><a class="hover:text-white hover:underline transition-colors duration-200" href="https://www.dataknobs.com/data-products/">Data Product Slides</a></li><li><a class="hover:text-white hover:underline transition-colors duration-200" href="https://www.dataknobs.com/generativeai/10-llms/rag/">RAG Slides</a></li></ul></div><div><h5 class="text-lg font-semibold text-white mb-4">Contact Us</h5><div class="space-y-2"><p>Redmond<br/>WA, USA</p><p><a class="hover:text-white hover:underline transition-colors duration-200" href="mailto:contact@dataknobs.com">contact@dataknobs.com</a></p><p><a class="hover:text-white hover:underline transition-colors duration-200" href="tel:+14253411222">+1 (425) 341-1222</a></p></div></div></div><div class="mt-12 border-t border-gray-700 pt-8 flex flex-col items-center justify-between sm:flex-row"><p class="text-sm text-gray-400">¬© 2025 Dataknobs, Inc. All rights reserved.</p><div class="flex space-x-4 mt-4 sm:mt-0"><a class="text-gray-400 hover:text-white transition-colors duration-200" href="https://www.facebook.com/dataknobs/"><span class="sr-only">Facebook</span><svg aria-hidden="true" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path clip-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.772-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" fill-rule="evenodd"></path></svg></a><a class="text-gray-400 hover:text-white transition-colors duration-200" href="https://www.twitter.com/dataknobs/"><span class="sr-only">Twitter</span><svg aria-hidden="true" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"></path></svg></a><a class="text-gray-400 hover:text-white transition-colors duration-200" href="https://www.linkedin.com/company/dataknobs/"><span class="sr-only">LinkedIn</span><svg aria-hidden="true" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path clip-rule="evenodd" d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.783-1.75-1.75s.784-1.75 1.75-1.75 1.75.783 1.75 1.75-.784 1.75-1.75 1.75zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z" fill-rule="evenodd"></path></svg></a></div></div></div></footer></body></html><script>
    document.addEventListener('DOMContentLoaded', () => {
        // Navigation
        const sections = document.querySelectorAll('section');
        const navLinks = document.querySelectorAll('.nav-link');
        const observer = new IntersectionObserver(entries => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    navLinks.forEach(link => {
                        const href = link.getAttribute('href');
                        link.classList.toggle('active', href.substring(1) === entry.target.id);
                    });
                }
            });
        }, { rootMargin: '-40% 0px -60% 0px' });
        sections.forEach(section => observer.observe(section));

        // Assumption Cards
        const assumptionCards = document.querySelectorAll('.assumption-card');
        assumptionCards.forEach(card => {
            const button = card.querySelector('button');
            const content = card.querySelector('div');
            const arrow = card.querySelector('.card-arrow');
            button.addEventListener('click', () => {
                const isExpanded = content.style.maxHeight && content.style.maxHeight !== '0px';
                assumptionCards.forEach(c => {
                    c.querySelector('div').style.maxHeight = '0px';
                    c.querySelector('.card-arrow').classList.remove('rotate-45');
                    c.classList.remove('bg-blue-50');
                });
                if (!isExpanded) {
                    content.style.maxHeight = content.scrollHeight + 'px';
                    arrow.classList.add('rotate-45');
                    card.classList.add('bg-blue-50');
                }
            });
        });

        // Simulation Logic
        const populateBtn = document.getElementById('populate-btn');
        const assignBtn = document.getElementById('assign-btn');
        const biasBtn = document.getElementById('bias-btn');
        const resetBtn = document.getElementById('reset-btn');
        const populationBox = document.getElementById('population-box');
        const treatmentGroupBox = document.getElementById('treatment-group-box');
        const controlGroupBox = document.getElementById('control-group-box');
        const resultsDiv = document.getElementById('simulation-results');
        const chartSection = document.getElementById('chart-section');
        const chartExplanation = document.getElementById('chart-explanation');
        const ateChartCtx = document.getElementById('ateChart').getContext('2d');
        let ateChart;
        let population = [];

        function createUnit(id) {
            const unit = document.createElement('div');
            const motivation = Math.random() > 0.5; // true = high, false = low
            const health = Math.random() > 0.5; // true = good, false = fair
            unit.className = 'population-unit w-4 h-4 rounded-full border-2';
            unit.dataset.id = id;
            unit.dataset.motivation = motivation;
            unit.dataset.health = health;
            unit.style.backgroundColor = motivation ? '#a7f3d0' : '#fde68a'; // green for high motivation, yellow for low
            unit.style.borderColor = health ? '#166534' : '#b45309'; // dark green for good health, orange for fair
            unit.title = `ID: ${id}\nMotivation: ${motivation ? 'High' : 'Low'}\nHealth: ${health ? 'Good' : 'Fair'}`;
            return unit;
        }

        populateBtn.addEventListener('click', () => {
            if (population.length > 0) return;
            for (let i = 0; i < 80; i++) {
                const unitEl = createUnit(i);
                population.push(unitEl);
                populationBox.appendChild(unitEl);
            }
            assignBtn.disabled = false;
            biasBtn.disabled = false;
            populateBtn.disabled = true;
        });

        function calculateGroupStats(group) {
            const units = Array.from(group.children);
            if (units.length === 0) return { mot: 0, health: 0 };
            const highMot = units.filter(u => u.dataset.motivation === 'true').length;
            const goodHealth = units.filter(u => u.dataset.health === 'true').length;
            return {
                mot: (highMot / units.length * 100).toFixed(1),
                health: (goodHealth / units.length * 100).toFixed(1)
            };
        }
        
        function displayStats() {
            const treatmentStats = calculateGroupStats(treatmentGroupBox);
            const controlStats = calculateGroupStats(controlGroupBox);
            resultsDiv.innerHTML = `
                <div class="p-3 bg-slate-50 rounded-md"><h5 class="font-bold">Treatment Group Stats</h5><p class="text-sm">üß† High Motivation: ${treatmentStats.mot}%</p><p class="text-sm">üíö Good Health: ${treatmentStats.health}%</p></div><div class="p-3 bg-slate-50 rounded-md"><h5 class="font-bold">Control Group Stats</h5><p class="text-sm">üß† High Motivation: ${controlStats.mot}%</p><p class="text-sm">üíö Good Health: ${controlStats.health}%</p></div>
            `;
        }

        assignBtn.addEventListener('click', () => {
            if (population.length === 0) return;
            const shuffled = [...population].sort(() => 0.5 - Math.random());
            shuffled.forEach((unit, i) => {
                if (i < 40) treatmentGroupBox.appendChild(unit);
                else controlGroupBox.appendChild(unit);
            });
            population = [];
            displayStats();
            assignBtn.disabled = true;
            biasBtn.disabled = true;
            runAnalysis(false); // No bias
        });
        
        biasBtn.addEventListener('click', () => {
            if (population.length === 0) return;
            population.forEach(unit => {
                // High motivation people are more likely to select into treatment
                const willJoin = (unit.dataset.motivation === 'true') ? Math.random() < 0.8 : Math.random() < 0.2;
                if(willJoin && treatmentGroupBox.children.length < 40) {
                     treatmentGroupBox.appendChild(unit);
                } else {
                     controlGroupBox.appendChild(unit);
                }
            });
             // Top up remaining
            const remaining = Array.from(populationBox.children);
            remaining.forEach(unit => {
                if (treatmentGroupBox.children.length < 40) treatmentGroupBox.appendChild(unit);
                else controlGroupBox.appendChild(unit);
            });

            population = [];
            displayStats();
            assignBtn.disabled = true;
            biasBtn.disabled = true;
            runAnalysis(true); // With bias
        });

        function runAnalysis(isBiased) {
            const baseOutcome = 50;
            const trueEffect = 15;
            const motivationEffect = 10;
            const healthEffect = 10;

            const calculateOutcome = (unit) => {
                let outcome = baseOutcome;
                if (unit.dataset.motivation === 'true') outcome += motivationEffect;
                if (unit.dataset.health === 'true') outcome += healthEffect;
                if (unit.parentElement.id === 'treatment-group-box') outcome += trueEffect;
                return outcome + (Math.random() * 10 - 5); // noise
            };

            const treatmentUnits = Array.from(treatmentGroupBox.children);
            const controlUnits = Array.from(controlGroupBox.children);

            const treatmentAvg = treatmentUnits.reduce((sum, unit) => sum + calculateOutcome(unit), 0) / treatmentUnits.length;
            const controlAvg = controlUnits.reduce((sum, unit) => sum + calculateOutcome(unit), 0) / controlUnits.length;
            
            const estimatedATE = treatmentAvg - controlAvg;

            chartSection.classList.remove('hidden');
            if(ateChart) ateChart.destroy();
            ateChart = new Chart(ateChartCtx, {
                type: 'bar',
                data: {
                    labels: ['Control Group', 'Treatment Group'],
                    datasets: [{
                        label: 'Average Outcome',
                        data: [controlAvg, treatmentAvg],
                        backgroundColor: ['#64748b', '#2563eb']
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: { legend: { display: false }, title: { display: true, text: `Estimated ATE: ${estimatedATE.toFixed(2)}` } },
                    scales: { y: { beginAtZero: false, suggestedMin: 50 } }
                }
            });

            if(isBiased) {
                chartExplanation.innerHTML = `<strong>Result with Selection Bias:</strong> The estimated effect is <strong class="text-orange-600">${estimatedATE.toFixed(2)}</strong>. This is likely an overestimate of the true effect (${trueEffect}) because the treatment group had more highly-motivated people to begin with. We can't distinguish the program's effect from the pre-existing differences.`;
            } else {
                chartExplanation.innerHTML = `<strong>Result with Random Assignment:</strong> The estimated effect is <strong class="text-blue-600">${estimatedATE.toFixed(2)}</strong>. Because the groups were balanced, this is an unbiased estimate of the true effect (${trueEffect}). The difference is due to the program itself.`;
            }
        }
        
        resetBtn.addEventListener('click', () => {
             populationBox.innerHTML = '<div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-slate-400 font-semibold">Population Area</div>';
             treatmentGroupBox.innerHTML = '';
             controlGroupBox.innerHTML = '';
             resultsDiv.innerHTML = '';
             population = [];
             assignBtn.disabled = true;
             biasBtn.disabled = true;
             populateBtn.disabled = false;
             chartSection.classList.add('hidden');
        });

    });
    </script></body></html>