<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Eavesdropping Dilemma: An Interactive Report on AI Privacy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Tech Neutral -->
    <!-- Application Structure Plan: A non-linear, thematic single-page application is used to make the dense report digestible. The structure consists of a sticky top navigation leading to five distinct sections: 1) 'Home' for a high-level introduction to the privacy paradox, 2) 'The Problem' which interactively details data collection and risks, 3) 'The Players' for a visual comparison of major tech companies, 4) 'The Rules' which presents a clear side-by-side of key regulations, and 5) 'The Solutions' which outlines technologies and recommendations. This thematic grouping, combined with interactive elements like tabs and accordions, allows users to explore topics based on interest rather than following a rigid, linear path, which is superior for usability and comprehension of complex information. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Comparing data points collected by Amazon, Google, Apple. Goal: Compare. Viz: Horizontal Bar Chart (Chart.js). Interaction: Hover to highlight, click logos below for detailed modals. Justification: A bar chart provides immediate visual comparison of quantitative data. Modals offer layered, on-demand detail without cluttering the main view.
        - Report Info: Types of data collected & privacy risks. Goal: Inform & Organize. Viz: Tabbed interface and accordions (HTML/CSS/JS). Interaction: User clicks to switch between 'Data Collection' and 'Risks', and expands accordions for details. Justification: Breaks down complex lists of information into manageable, user-controlled chunks, preventing cognitive overload.
        - Report Info: GDPR vs. CCPA/CPRA comparison. Goal: Compare. Viz: Side-by-side two-column layout (Tailwind Grid). Interaction: Static comparison. Justification: Direct side-by-side comparison is the clearest way to present contrasting legal frameworks.
        - Report Info: Privacy-Enhancing Technologies (PETs). Goal: Inform. Viz: Card-based layout (Tailwind Flexbox). Interaction: Hover effects for engagement. Justification: Cards are a modern, scannable way to present distinct concepts.
        - Report Info: Recommendations for stakeholders. Goal: Inform. Viz: Tabbed interface. Interaction: Click to switch views. Justification: Organizes recommendations logically by target audience.
        - Library/Method: Chart.js for canvas-based charting. Vanilla JS for all interactions. Tailwind CSS for layout and styling. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Inter', sans-serif; }
        .chart-container { position: relative; width: 100%; max-width: 800px; margin-left: auto; margin-right: auto; height: 300px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 400px; } }
        .nav-link { transition: color 0.3s, border-color 0.3s; }
        .nav-link.active { color: #3b82f6; border-bottom-color: #3b82f6; }
        .section-fade-in { animation: fadeIn 1s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .modal { transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 antialiased">

    <header id="header" class="bg-slate-50/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-6 py-3 flex justify-between items-center">
            <a href="#home" class="font-bold text-lg md:text-xl text-slate-900">AI Privacy Report</a>
            <div class="hidden md:flex items-center space-x-8">
                <a href="#problem" class="nav-link text-slate-600 hover:text-blue-500 border-b-2 border-transparent pb-1">The Problem</a>
                <a href="#players" class="nav-link text-slate-600 hover:text-blue-500 border-b-2 border-transparent pb-1">The Players</a>
                <a href="#rules" class="nav-link text-slate-600 hover:text-blue-500 border-b-2 border-transparent pb-1">The Rules</a>
                <a href="#solutions" class="nav-link text-slate-600 hover:text-blue-500 border-b-2 border-transparent pb-1">The Solutions</a>
            </div>
            <button id="mobile-menu-button" class="md:hidden text-slate-800 focus:outline-none">
                <span class="text-2xl">&#9776;</span>
            </button>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden bg-slate-100">
            <a href="#problem" class="block text-center py-2 px-4 text-slate-700 hover:bg-slate-200">The Problem</a>
            <a href="#players" class="block text-center py-2 px-4 text-slate-700 hover:bg-slate-200">The Players</a>
            <a href="#rules" class="block text-center py-2 px-4 text-slate-700 hover:bg-slate-200">The Rules</a>
            <a href="#solutions" class="block text-center py-2 px-4 text-slate-700 hover:bg-slate-200">The Solutions</a>
        </div>
    </header>

    <main class="container mx-auto px-6">
        <section id="home" class="min-h-screen flex items-center justify-center text-center section-fade-in">
            <div>
                <h1 class="text-4xl md:text-6xl font-bold tracking-tight text-slate-900">The Eavesdropping Dilemma</h1>
                <p class="mt-4 text-lg md:text-xl text-slate-600 max-w-3xl mx-auto">An interactive exploration of data privacy in the age of AI assistants. Discover the trade-offs between convenience and control.</p>
                <div class="mt-8">
                    <a href="#problem" class="bg-blue-500 text-white font-semibold py-3 px-6 rounded-lg hover:bg-blue-600 transition-colors">Explore the Report</a>
                </div>
            </div>
        </section>

        <section id="problem" class="py-20 md:py-32">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-slate-900">The Privacy Problem</h2>
                <p class="mt-3 text-lg text-slate-600 max-w-2xl mx-auto">This section explores the core of the privacy challenge: the vast amount of data AI assistants collect and the risks this creates. Understand what your assistant knows about you and how that information can be vulnerable.</p>
            </div>

            <div>
                <div class="flex justify-center border-b border-slate-300 mb-8">
                    <button data-tab="collection" class="tab-button active-tab py-2 px-6 font-semibold text-blue-500 border-b-2 border-blue-500">Data Collection</button>
                    <button data-tab="risks" class="tab-button py-2 px-6 font-semibold text-slate-500">Privacy Risks</button>
                </div>

                <div id="collection" class="tab-content">
                    <p class="text-center text-slate-600 mb-8 max-w-3xl mx-auto">AI assistants are fueled by data. This data comes from what you say directly, but also from a wide array of passive sources, creating a detailed, and often surprisingly intimate, profile of your life.</p>
                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200">
                            <h3 class="font-semibold text-lg text-slate-800">üó£Ô∏è Voice & Transcripts</h3>
                            <p class="mt-2 text-slate-600">Audio of your commands and surrounding conversations from "false wakes," which are often stored indefinitely.</p>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200">
                            <h3 class="font-semibold text-lg text-slate-800">üìç Location Data</h3>
                            <p class="mt-2 text-slate-600">Precise GPS data provides context for requests but also tracks your movements for profiling.</p>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200">
                            <h3 class="font-semibold text-lg text-slate-800">üë§ Biometric Data</h3>
                            <p class="mt-2 text-slate-600">Your unique voiceprint for speaker identification, which can also be used for other authentication purposes.</p>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200">
                            <h3 class="font-semibold text-lg text-slate-800">üíª Device & Usage Data</h3>
                            <p class="mt-2 text-slate-600">IP addresses, device serial numbers, and logs of your interaction patterns and feature usage.</p>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200">
                            <h3 class="font-semibold text-lg text-slate-800">üåê Web & Inferred Data</h3>
                            <p class="mt-2 text-slate-600">Browse habits and, critically, sensitive inferences about your health, politics, and income, even if never stated.</p>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200">
                            <h3 class="font-semibold text-lg text-slate-800">‚öôÔ∏è Sensor Data</h3>
                            <p class="mt-2 text-slate-600">Information from accelerometers, gyroscopes, and light sensors can infer activities like walking, driving, or sleeping.</p>
                        </div>
                    </div>
                </div>

                <div id="risks" class="tab-content hidden">
                    <p class="text-center text-slate-600 mb-8 max-w-3xl mx-auto">The data collected exposes users to a range of threats, from traditional data breaches to sophisticated, AI-specific attacks that exploit the very nature of these learning systems. Click each risk to learn more.</p>
                    <div id="accordion-container" class="space-y-4 max-w-4xl mx-auto"></div>
                </div>
            </div>
        </section>

        <section id="players" class="py-20 md:py-32 bg-white rounded-2xl my-16">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-slate-900">The Players: A Company Comparison</h2>
                <p class="mt-3 text-lg text-slate-600 max-w-3xl mx-auto">The major voice assistants operate under different business models, which directly influences their approach to data collection. This chart compares the number of data points collected, while the cards below reveal specific company practices and controversies.</p>
            </div>
            <div class="chart-container">
                <canvas id="playersChart"></canvas>
            </div>
             <div class="mt-12 grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                <div data-company="Amazon" class="company-card p-6 rounded-lg cursor-pointer transition-transform hover:scale-105 hover:shadow-xl border-2 border-transparent hover:border-blue-400">
                    <h3 class="text-2xl font-semibold">Amazon Alexa</h3>
                    <p class="text-slate-500">Commerce-Driven</p>
                </div>
                <div data-company="Google" class="company-card p-6 rounded-lg cursor-pointer transition-transform hover:scale-105 hover:shadow-xl border-2 border-transparent hover:border-blue-400">
                    <h3 class="text-2xl font-semibold">Google Assistant</h3>
                    <p class="text-slate-500">Advertising-Centric</p>
                </div>
                 <div data-company="Apple" class="company-card p-6 rounded-lg cursor-pointer transition-transform hover:scale-105 hover:shadow-xl border-2 border-transparent hover:border-blue-400">
                    <h3 class="text-2xl font-semibold">Apple Siri</h3>
                    <p class="text-slate-500">Privacy-as-Feature</p>
                </div>
            </div>
        </section>

        <section id="rules" class="py-20 md:py-32">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-slate-900">The Rules: Global Regulations</h2>
                <p class="mt-3 text-lg text-slate-600 max-w-3xl mx-auto">This section provides a high-level comparison of the two most influential data privacy laws: Europe's GDPR and California's CCPA/CPRA. See how they approach key issues like automated decision-making and the right to delete your data, and understand the compliance challenges AI companies face.</p>
            </div>
            <div class="grid md:grid-cols-2 gap-8 max-w-6xl mx-auto">
                <div class="bg-white p-8 rounded-xl shadow-lg border border-slate-200">
                    <h3 class="text-2xl font-bold mb-4 text-center text-slate-800">üá™üá∫ GDPR / EU AI Act</h3>
                    <ul id="gdpr-list" class="space-y-4"></ul>
                </div>
                <div class="bg-white p-8 rounded-xl shadow-lg border border-slate-200">
                    <h3 class="text-2xl font-bold mb-4 text-center text-slate-800">üá∫üá∏ CCPA / CPRA (California)</h3>
                    <ul id="ccpa-list" class="space-y-4"></ul>
                </div>
            </div>
             <p class="text-center text-slate-500 mt-12 max-w-3xl mx-auto italic">A key challenge for both frameworks is the "un-baking the cake" problem: legal rights like data deletion are technically infeasible to apply to a fully trained AI model without starting over.</p>
        </section>

        <section id="solutions" class="py-20 md:py-32">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-slate-900">The Solutions: A Path Forward</h2>
                <p class="mt-3 text-lg text-slate-600 max-w-3xl mx-auto">Addressing AI privacy requires a multi-faceted approach. This section explores cutting-edge Privacy-Enhancing Technologies (PETs) that build protection into system design, followed by actionable recommendations for key stakeholders.</p>
            </div>
            <div>
                 <h3 class="text-2xl font-bold text-slate-800 text-center mb-8">Privacy-Enhancing Technologies (PETs)</h3>
                 <div id="pets-container" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
            </div>
            <div class="mt-20">
                <h3 class="text-2xl font-bold text-slate-800 text-center mb-8">Recommendations for a Trustworthy Future</h3>
                <div class="flex justify-center border-b border-slate-300 mb-8">
                    <button data-rec-tab="developers" class="rec-tab-button active-rec-tab py-2 px-6 font-semibold text-blue-500 border-b-2 border-blue-500">Developers</button>
                    <button data-rec-tab="regulators" class="rec-tab-button py-2 px-6 font-semibold text-slate-500">Regulators</button>
                    <button data-rec-tab="users" class="rec-tab-button py-2 px-6 font-semibold text-slate-500">Users</button>
                </div>
                <div id="recommendations-container" class="bg-white p-8 rounded-xl shadow-md border border-slate-200 max-w-4xl mx-auto"></div>
            </div>
        </section>

    </main>
    
    <footer class="bg-slate-800 text-slate-300 py-8">
        <div class="container mx-auto px-6 text-center">
            <p>Interactive Report generated from "The Eavesdropping Dilemma: A Research Report on Data Privacy in the Age of AI Assistants".</p>
            <p class="text-sm text-slate-400 mt-2">This is a conceptual representation and not an exhaustive legal or technical analysis.</p>
        </div>
    </footer>

    <div id="companyModal" class="modal fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 opacity-0 invisible">
        <div id="modalContent" class="bg-white rounded-2xl shadow-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto transform scale-95 transition-transform">
            <div class="flex justify-between items-start">
                <h2 id="modalTitle" class="text-2xl md:text-3xl font-bold text-slate-900"></h2>
                <button id="closeModal" class="text-3xl font-light text-slate-500 hover:text-slate-800">&times;</button>
            </div>
            <p id="modalSubtitle" class="text-slate-500 mt-1 mb-6"></p>
            <div id="modalBody" class="text-slate-600 space-y-4"></div>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            const riskData = {
                "Foundational Risks": [
                    { title: "Unauthorized Access & Data Breaches", content: "The massive aggregation of personal data creates a high-value target for hackers. A breach can have catastrophic consequences for user privacy." },
                    { title: "Surveillance and Eavesdropping", content: "The 'always-on' microphone and 'false wake' activations lead to the recording of private conversations without consent, a primary user concern." },
                    { title: "Human Review", content: "Contractors listen to a subset of voice recordings, including accidental ones, for quality control, exposing sensitive details to human listeners." },
                    { title: "Opaque Data Practices", content: "Complex and lengthy privacy policies make it difficult for users to understand what data is collected, why, and with whom it's shared." }
                ],
                "AI-Specific & Emerging Vulnerabilities": [
                    { title: "Model-Based Data Exposure", content: "Attacks like 'prompt injection' and 'model inversion' can trick the AI into revealing sensitive training data or reconstructing user information like voiceprints." },
                    { title: "Voice Cloning & Impersonation", content: "Attackers can use AI to create a synthetic clone of a user's voice to bypass biometric security and authorize fraudulent transactions." },
                    { title: "Adversarial Audio Attacks", content: "Inaudible commands hidden in high-frequency sounds or background noise can be processed by the assistant, leading to unauthorized actions." },
                    { title: "Malicious Third-Party 'Skills'", content: "Legitimate-looking apps in the assistant's ecosystem can be designed to steal data, record conversations, or phish for information." }
                ]
            };

            const companyData = {
                Amazon: {
                    title: "Amazon Alexa",
                    subtitle: "E-commerce & Cloud Services Model",
                    details: [
                        "<strong>Data Policy:</strong> Collects data to 'personalize and continually improve' the experience, which explicitly includes recommendations and targeted advertising.",
                        "<strong>Default Setting:</strong> Voice recordings and transcripts are saved by default. Cloud processing of voice data is now mandatory for users.",
                        "<strong>Key Controversy:</strong> Fined $25M by the FTC in 2023 for violating children's privacy law (COPPA) by retaining kids' voice recordings indefinitely, even after deletion requests.",
                        "<strong>Ongoing Lawsuit:</strong> Facing a class-action suit alleging that 'false wakes' are an intentional design feature to illegally record conversations for commercial gain."
                    ]
                },
                Google: {
                    title: "Google Assistant",
                    subtitle: "Advertising & Search Model",
                    details: [
                        "<strong>Data Policy:</strong> Uses data to make services 'more helpful and personalized'. States it never sells audio recordings, but uses activity data for targeted ads.",
                        "<strong>Default Setting:</strong> In a key difference, audio recordings are NOT saved by default. Users must explicitly opt-in to 'Voice & Audio Activity'.",
                        "<strong>Key Controversy:</strong> A contractor leaked over 1,000 private audio clips, confirming the use of human reviewers for recordings that included accidental activations and sensitive data.",
                        "<strong>Ongoing Lawsuit:</strong> Facing a class-action suit alleging the assistant records conversations without consent through 'false wakes' triggered by similar-sounding phrases."
                    ]
                },
                Apple: {
                    title: "Apple Siri",
                    subtitle: "Hardware & Services Model",
                    details: [
                        "<strong>Data Policy:</strong> Strategically positions privacy as a feature. Emphasizes on-device processing and data minimization. Siri requests are linked to a random identifier, not an Apple ID.",
                        "<strong>Default Setting:</strong> Audio recordings are NOT saved by default. Users must explicitly opt-in to the 'Improve Siri & Dictation' program.",
                        "<strong>Key Controversy:</strong> Its 'privacy-first' image was damaged by a scandal revealing contractors were grading Siri recordings, including sensitive ones from false wakes.",
                        "<strong>Major Settlement:</strong> Agreed to a $95M settlement in 2024 to resolve the class-action lawsuit over the illegal recording and human review practices."
                    ]
                }
            };

            const regulationData = {
                gdpr: [
                    { title: "Basis for Regulation", content: "Regulates the AI system itself based on risk (EU AI Act) and the processing of personal data (GDPR)." },
                    { title: "Automated Decisions", content: "Grants the right to an explanation of the logic involved and the right to human intervention." },
                    { title: "Right to Deletion", content: "Provides a 'right to be forgotten,' requiring data erasure upon request." },
                    { title: "Risk Assessments", content: "Data Protection Impact Assessments (DPIAs) are required for any high-risk data processing." }
                ],
                ccpa: [
                    { title: "Basis for Regulation", content: "Regulates the use of Automated Decision-Making Technology (ADMT) on California residents' personal information." },
                    { title: "Automated Decisions", content: "Grants the right to an explanation and, critically, the right to opt-out of personal data being used for ADMT." },
                    { title: "Right to Deletion", content: "Provides a right to delete personal information a business has collected." },
                    { title: "Risk Assessments", content: "Requires businesses to submit risk assessments to the California Privacy Protection Agency (CPPA) for high-risk processing." }
                ]
            };

            const petData = [
                { title: "On-Device Processing", content: "Performs AI tasks on the user's device, so sensitive data never needs to be sent to the cloud.", icon: "üì±" },
                { title: "Federated Learning", content: "Trains a global AI model on decentralized devices without centralizing raw user data. Only model updates are shared.", icon: "ü§ñ" },
                { title: "Differential Privacy", content: "Adds statistical 'noise' to data to mathematically ensure that an individual's information cannot be identified from the output.", icon: "üìä" },
                { title: "Homomorphic Encryption", content: "Allows computation directly on encrypted data. The ultimate 'data-in-use' protection, but currently very slow.", icon: "üîí" },
                { title: "Secure Multi-Party Comp.", content: "Allows multiple parties (e.g., hospitals) to jointly train a model on their combined data without revealing it to each other.", icon: "ü§ù" },
                { title: "User Controls", content: "Foundational tools like microphone mute buttons, history deletion, and managing third-party app permissions.", icon: "‚öôÔ∏è" },
            ];

            const recommendationData = {
                developers: {
                    title: "For Technology Developers & Companies",
                    points: [
                        "<strong>Embrace Privacy-by-Design and Default:</strong> Integrate privacy from the start and make protective settings the default.",
                        "<strong>Invest in and Layer PETs:</strong> Use a 'defense-in-depth' approach combining on-device processing, federated learning, and differential privacy.",
                        "<strong>Radical Transparency:</strong> Provide clear, simple, and honest information about data collection in easy-to-use dashboards.",
                        "<strong>Meaningful User Control:</strong> Build simple, reliable mechanisms for users to access and permanently delete their data."
                    ]
                },
                regulators: {
                    title: "For Policymakers and Regulators",
                    points: [
                        "<strong>Modernize Legal Frameworks:</strong> Shift regulatory focus towards *ex-ante* governance, mandating risk assessments and audits before deployment.",
                        "<strong>Enforce Vigorously:</strong> Continue to investigate and penalize violations to create a powerful deterrent against prioritizing profits over privacy.",
                        "<strong>Incentivize PET Adoption:</strong> Foster a market for privacy innovation through safe harbor provisions and research funding."
                    ]
                },
                users: {
                    title: "For End-Users and Advocacy Groups",
                    points: [
                        "<strong>Promote Digital Literacy:</strong> Educate the public on the real privacy trade-offs and how to use available controls effectively.",
                        "<strong>Advocate for Stronger Regulation:</strong> Use public pressure to drive legislative change and hold corporations accountable.",
                        "<strong>Exercise Privacy Rights:</strong> Actively use privacy settings, opt-out of non-essential collection, and choose products with better track records."
                    ]
                }
            };

            const accordionContainer = document.getElementById('accordion-container');
            Object.keys(riskData).forEach(category => {
                const categoryHeader = document.createElement('h3');
                categoryHeader.className = 'text-xl font-semibold text-slate-800 pt-4';
                categoryHeader.textContent = category;
                accordionContainer.appendChild(categoryHeader);

                riskData[category].forEach(item => {
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'bg-white rounded-lg border border-slate-200 overflow-hidden';
                    const button = document.createElement('button');
                    button.className = 'accordion-button w-full text-left p-4 font-medium text-slate-700 flex justify-between items-center hover:bg-slate-100 transition-colors';
                    button.innerHTML = `<span>${item.title}</span><span class="transform transition-transform text-blue-500 text-xl font-light">+</span>`;
                    const content = document.createElement('div');
                    content.className = 'accordion-content hidden p-4 pt-0 text-slate-600';
                    content.innerHTML = `<p>${item.content}</p>`;
                    itemDiv.appendChild(button);
                    itemDiv.appendChild(content);
                    accordionContainer.appendChild(itemDiv);
                });
            });
            
            accordionContainer.addEventListener('click', function(e) {
                const button = e.target.closest('.accordion-button');
                if (button) {
                    const content = button.nextElementSibling;
                    const icon = button.querySelector('span:last-child');
                    const isOpen = !content.classList.contains('hidden');
                    
                    document.querySelectorAll('.accordion-content').forEach(c => c.classList.add('hidden'));
                    document.querySelectorAll('.accordion-button span:last-child').forEach(i => { i.textContent = '+'; i.classList.remove('rotate-45'); });

                    if (isOpen) {
                        content.classList.add('hidden');
                        icon.textContent = '+';
                        icon.classList.remove('rotate-45');
                    } else {
                        content.classList.remove('hidden');
                        icon.textContent = '+';
                        icon.classList.add('rotate-45');
                    }
                }
            });

            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    tabButtons.forEach(btn => {
                        btn.classList.remove('active-tab', 'text-blue-500', 'border-blue-500');
                        btn.classList.add('text-slate-500');
                    });
                    button.classList.add('active-tab', 'text-blue-500', 'border-blue-500');
                    button.classList.remove('text-slate-500');

                    tabContents.forEach(content => {
                        if (content.id === button.dataset.tab) {
                            content.classList.remove('hidden');
                        } else {
                            content.classList.add('hidden');
                        }
                    });
                });
            });

            const recTabButtons = document.querySelectorAll('.rec-tab-button');
            const recContainer = document.getElementById('recommendations-container');

            function updateRecommendations(tab) {
                const data = recommendationData[tab];
                recContainer.innerHTML = `
                    <h4 class="text-xl font-semibold mb-4 text-center text-slate-800">${data.title}</h4>
                    <ul class="space-y-3 list-disc list-inside">
                        ${data.points.map(p => `<li class="text-slate-600">${p}</li>`).join('')}
                    </ul>`;
            }

            recTabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    recTabButtons.forEach(btn => {
                        btn.classList.remove('active-rec-tab', 'text-blue-500', 'border-blue-500');
                        btn.classList.add('text-slate-500');
                    });
                    button.classList.add('active-rec-tab', 'text-blue-500', 'border-blue-500');
                    button.classList.remove('text-slate-500');
                    updateRecommendations(button.dataset.recTab);
                });
            });
            updateRecommendations('developers');

            const ctx = document.getElementById('playersChart').getContext('2d');
            const playersChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Amazon Alexa', 'Apple Siri', 'Google Assistant'],
                    datasets: [{
                        label: 'Data Points Collected (out of 48)',
                        data: [37, 30, 28],
                        backgroundColor: [
                            'rgba(255, 159, 64, 0.6)',
                            'rgba(201, 203, 207, 0.6)',
                            'rgba(75, 192, 192, 0.6)'
                        ],
                        borderColor: [
                            'rgba(255, 159, 64, 1)',
                            'rgba(201, 203, 207, 1)',
                            'rgba(75, 192, 192, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: '#1e293b',
                            titleFont: { size: 14, weight: 'bold' },
                            bodyFont: { size: 12 },
                            padding: 12,
                            cornerRadius: 6
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            grid: { color: 'rgba(0,0,0,0.05)' },
                            ticks: { font: { size: 12 } }
                        },
                        y: {
                            grid: { display: false },
                             ticks: { font: { size: 14, weight: '500' } }
                        }
                    }
                }
            });

            const companyCards = document.querySelectorAll('.company-card');
            const modal = document.getElementById('companyModal');
            const modalContent = document.getElementById('modalContent');
            const closeModalBtn = document.getElementById('closeModal');

            companyCards.forEach(card => {
                card.addEventListener('click', () => {
                    const company = card.dataset.company;
                    const data = companyData[company];
                    
                    document.getElementById('modalTitle').textContent = data.title;
                    document.getElementById('modalSubtitle').textContent = data.subtitle;
                    document.getElementById('modalBody').innerHTML = data.details.map(d => `<p>${d}</p>`).join('');

                    modal.classList.remove('opacity-0', 'invisible');
                    modalContent.classList.remove('scale-95');
                });
            });
            
            const closeModal = () => {
                modal.classList.add('opacity-0', 'invisible');
                modalContent.classList.add('scale-95');
            };

            closeModalBtn.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });

            const gdprList = document.getElementById('gdpr-list');
            const ccpaList = document.getElementById('ccpa-list');
            regulationData.gdpr.forEach(item => {
                gdprList.innerHTML += `<li class="bg-slate-50 p-4 rounded-lg"><strong class="text-slate-700">${item.title}:</strong> ${item.content}</li>`;
            });
            regulationData.ccpa.forEach(item => {
                ccpaList.innerHTML += `<li class="bg-slate-50 p-4 rounded-lg"><strong class="text-slate-700">${item.title}:</strong> ${item.content}</li>`;
            });
            
            const petsContainer = document.getElementById('pets-container');
            petData.forEach(pet => {
                petsContainer.innerHTML += `
                    <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200 transition-transform hover:-translate-y-1">
                        <h4 class="font-semibold text-lg text-slate-800"><span class="mr-2">${pet.icon}</span>${pet.title}</h4>
                        <p class="mt-2 text-slate-600">${pet.content}</p>
                    </div>`;
            });

            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });

            const header = document.getElementById('header');
            const sections = document.querySelectorAll('section[id]');
            const navLinks = document.querySelectorAll('.nav-link');

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.id;
                        navLinks.forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href') === `#${id}`) {
                                link.classList.add('active');
                            }
                        });
                        entry.target.classList.add('section-fade-in');
                    }
                });
            }, { rootMargin: '-30% 0px -70% 0px' });

            sections.forEach(section => {
                observer.observe(section);
            });
            
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth'
                    });
                     if (mobileMenu.classList.contains('hidden') === false) {
                        mobileMenu.classList.add('hidden');
                    }
                });
            });
        });
    </script>
</body>
</html>
